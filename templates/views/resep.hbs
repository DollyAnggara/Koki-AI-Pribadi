<main class="kontainer-utama">
  <section>
    <div class="kartu">
      <h2 class="kartu-judul">ğŸ“– Daftar Resep</h2>
      <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:space-between;">
        <div style="flex:1;min-width:220px"><input type="text" class="form-input" id="cariResep" placeholder="ğŸ” Cari resep..."></div>
        <div style="display:flex;gap:8px;align-items:center;margin-left:12px"><button id="tombolTambahResep" class="tombol-kirim">ï¼‹ Tambah Resep</button></div>
      </div>
      <p style="margin-top:8px;color:var(--warna-teks-sekunder);font-size:0.95rem;">Klik kartu resep untuk melihat bahan dan langkah pembuatan.</p>

      {{#if counts}}
        <div id="resepInfoBar" style="margin-top:8px;color:var(--warna-teks-secondary);font-size:0.95rem;">Total: {{counts.total}} â€¢ Approved: {{counts.approved}} â€¢ Pending: {{counts.pending}} â€¢ Rejected: {{counts.rejected}}</div>
      {{/if}}

      <div id="formTambahResep" class="kartu" style="display:none;margin-top:12px;">
        <h3 class="kartu-judul">Tambah Resep Baru</h3>
        <div class="form-grup"><input id="inputNamaResep" class="form-input" placeholder="Nama Resep" required></div>
        <div class="form-grup"><textarea id="inputDeskripsi" class="form-input" placeholder="Deskripsi (opsional)" rows="2"></textarea></div>
        <div style="display:flex;gap:8px;">
          <input id="inputPorsi" type="number" min="1" class="form-input" placeholder="Porsi" style="width:80px;">
          <input id="inputWaktuPersiapan" type="number" min="0" class="form-input" placeholder="Waktu persiapan (menit)" style="width:180px;">
          <input id="inputWaktuMemasak" type="number" min="0" class="form-input" placeholder="Waktu memasak (menit)" style="width:180px;">
        </div>
        <div class="form-grup">
          <label>Bahan (satu bahan per baris). Format yang disarankan: <strong>Nama [jumlah] [satuan]</strong> â€” cukup spasi sebagai pemisah. Jika perlu, format lama dengan titik koma juga masih didukung.</label>
          <textarea id="inputBahan" class="form-input" placeholder="contoh: Wortel
Garam
atau: Wortel 200 gram" rows="4"></textarea>
        </div>
        <div class="form-grup">
          <label>Langkah (satu per baris)</label>
          <textarea id="inputLangkah" class="form-input" placeholder="contoh: Kupas dan potong wortel
Rebus wortel" rows="4"></textarea>
        </div>
        <div style="display:flex;gap:8px;">
          <button id="tombolSimpanResep" class="tombol-kirim">Simpan</button>
          <button id="tombolBatalResep" class="tombol-batal">Batal</button>
        </div>
        <small style="color:var(--warna-teks-sekunder);">Cukup isi nama resep dan minimal satu bahan (satu baris = satu bahan). Format jumlah/satuan opsional.</small>
      </div>
    </div>
    <div class="grid-resep" id="daftarResep">
      {{#if resep.length}}
        {{#each resep}}
        <div class="kartu-resep" data-id="{{this._id}}">
          <div class="gambar-resep">ğŸ²</div>
          <div class="info-resep">
            <div class="nama-resep">{{this.nama}}</div>
            <div class="meta-resep"><span>â±ï¸ {{this.waktu}} menit</span><span>ğŸ”¥ {{this.kalori}} kkal</span></div>
            <div class="detail-resep" id="detail_{{this._id}}" style="display:none;margin-top:8px;"></div>
          </div>
        </div>
        {{/each}}
      {{else}}
        <div class="kartu">
          <p>Tidak ada resep untuk ditampilkan. Coba tambah resep atau jalankan seed database.</p>
        </div>
      {{/if}}
    </div>
  </section>
</main>

{{> footer}}