<main class="kontainer-utama">
  <section>
    <div class="kartu kontainer-chat">
      <h2 class="kartu-judul">ðŸ’¬ Chat dengan Koki AI</h2>
      <div class="area-pesan" id="areaPesan">
        <div class="pesan pesan-koki">Halo! ðŸ‘‹ Saya Koki AI, asisten memasak virtual Anda. Apa yang ingin Anda masak hari ini?</div>
      </div>
      <div id="indikatorMengetik" class="indikator-mengetik" style="display:none;"><span></span><span></span><span></span></div>
      <form class="form-chat" id="formChat"><input type="text" class="input-chat" id="inputPesan" placeholder="Ketik pesan Anda..."><button type="submit" class="tombol-kirim">Kirim</button></form>
    </div>
  </section>
</main>

<script>
  async function sendMessage() {
    const input = document.getElementById('inputPesan').value;
    const responseDiv = document.getElementById('areaPesan');
    if (!input) {
      responseDiv.innerHTML = 'Please enter a message.';
      return;
    }
    responseDiv.innerHTML = 'Loading...';
    try {
      const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer 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',
        'HTTP-Referer': 'https://koki-ai-pribadi.vercel.app/',
        'X-Title': 'Koki AI Pribadi',
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        model: 'deepseek/deepseek-r1:free',
        messages: [
        {
        role: 'user',
        content: input,
        }
        ],
      }),
      });
      const data = await response.json();
      console.log(data);
      const markdownText = data.choices?.[0]?.message?.content || 'No response from AI.';
      responseDiv.innerHTML = markdownText;
    } catch (error) {
    responseDiv.innerHTML = 'Error: ' + error.message;
    }
  }
</script>

{{> footer}}